"use strict";(self.webpackChunkrlc=self.webpackChunkrlc||[]).push([[683],{7017:(e,t,o)=>{o.d(t,{A:()=>l});o(5043);var n=o(579);const l=function(e){let{booking:t,handleChange:o,handleAddWorkTime:l,handleRemoveWorkTime:s,handleSubmit:a,id:i}=e;const r=e=>{if(!e)return"";const t=new Date(e);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}T${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`};return(0,n.jsxs)("div",{className:"booking-form-container",children:[(0,n.jsx)("h1",{className:"form-title",children:i?"Edit Booking":"Create Booking"}),(0,n.jsxs)("form",{onSubmit:a,className:"booking-form",children:[(0,n.jsxs)("label",{className:"form-label",children:["Date:",(0,n.jsx)("input",{className:"form-input",type:"date",name:"d",value:t.d?t.d.split("T")[0]:"",onChange:e=>o(e,null),required:!0})]}),(0,n.jsxs)("label",{style:{display:"none"},className:"form-label",children:["All Number:",(0,n.jsx)("input",{className:"form-input",type:"number",name:"allSlots",value:t.allSlots||0,onChange:e=>o(e,null),required:!0})]}),(0,n.jsxs)("div",{className:"worktime-section",children:[(0,n.jsx)("h2",{className:"worktime-title",children:"Work Times"}),t.workTime&&t.workTime.map(((e,t)=>(0,n.jsxs)("div",{className:"worktime-item",children:[(0,n.jsxs)("label",{className:"form-label",children:["Time:",(0,n.jsx)("input",{className:"form-input",type:"datetime-local",name:"time",value:r(e.time),onChange:e=>o(e,t),required:!0})]}),(0,n.jsxs)("label",{className:"form-label",children:["Number:",(0,n.jsx)("input",{className:"form-input",type:"number",name:"slots",value:e.slots||0,onChange:e=>o(e,t),required:!0})]}),(0,n.jsx)("button",{type:"button",className:"remove-btn",onClick:()=>s(t),children:"Remove"})]},t))),(0,n.jsx)("button",{type:"button",className:"add-btn",onClick:l,children:"Add Work Time"})]}),(0,n.jsx)("button",{type:"submit",className:"submit-btn",children:i?"Update":"Create"})]})]})}},8683:(e,t,o)=>{o.r(t),o.d(t,{default:()=>r});var n=o(5043),l=o(6213),s=o(3216),a=o(7017),i=o(579);const r=function(){const[e,t]=(0,n.useState)({d:"",allNr:0,workTime:[]}),{id:o}=(0,s.g)(),r=(0,s.Zp)(),m=(0,s.zy)(),{date:c}=m.state||{},{lang:d}=m.state||{},{level:u}=m.state||{},{teacherId:g}=m.state||{},{lessonTypes:h}=m.state||{},{schoolId:k}=m.state||{};return(0,n.useEffect)((()=>{if(o){async function e(){try{console.log("Fetching booking with ID:",o);const e={...c,workTime:c.workTime.map((e=>({...e,time:new Date(e.time).toISOString().slice(0,16)})))};t(e),console.log("Fetched booking with normalized time:",e)}catch(e){console.error("Error fetching booking:",e)}}e()}}),[o,c]),(0,i.jsx)(a.A,{booking:e,handleChange:(o,n)=>{const{name:l,value:s}=o.target;if(null!==n){const o=[...e.workTime];o[n]={...o[n],[l]:s},t({...e,workTime:o}),console.log("Updated work time at index",n,":",o)}else t({...e,[l]:s}),console.log("Updated booking:",{...e,[l]:s})},handleAddWorkTime:()=>{const e={time:"",slots:0};t((t=>{const o=[...t.workTime,e];return console.log("Added new work time:",e),{...t,workTime:o}}))},handleRemoveWorkTime:e=>{t((t=>{const o=t.workTime.filter(((t,o)=>o!==e));return console.log("Removed work time at index",e,":",o),{...t,workTime:o}}))},handleSubmit:async t=>{t.preventDefault();const o={...e,lang:d,levelName:u,lessonTypes:h};console.log("Submitting booking:",o);try{await l.A.put(`http://13.60.221.226/api/schools/${k}/teachers/${g}/dates`,o),console.log("Booking updated successfully"),r(`/${k}/admin`)}catch(n){console.error("Error updating booking:",n)}},id:o})}}}]);
//# sourceMappingURL=683.65347cbb.chunk.js.map
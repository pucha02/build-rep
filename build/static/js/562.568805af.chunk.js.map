{"version":3,"file":"static/js/562.568805af.chunk.js","mappings":"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","sources":["common/utils/smallFn/convertDate.js","pages/regPages/UserProfile.jsx"],"sourcesContent":["import { format } from 'date-fns';\r\nimport { toZonedTime  } from 'date-fns-tz';\r\nimport { uk } from 'date-fns/locale';\r\n\r\nfunction translateUkrainianMonthToEnglish(month) {\r\n    const months = {\r\n        \"січня\": \"January\",\r\n        \"лютого\": \"February\",\r\n        \"березня\": \"March\",\r\n        \"квітня\": \"April\",\r\n        \"травня\": \"May\",\r\n        \"червня\": \"June\",\r\n        \"липня\": \"July\",\r\n        \"серпня\": \"August\",\r\n        \"вересня\": \"September\",\r\n        \"жвтня\": \"October\",\r\n        \"листпада\": \"November\",\r\n        \"грудня\": \"December\"\r\n    };\r\n\r\n    return months[month];\r\n}\r\n\r\nfunction parseUkrainianDate(dateStr) {\r\n    \r\n    const cleanedDateStr = dateStr.replace('р.', '').replace('о', '').trim();\r\n    console.log(cleanedDateStr)\r\n    const [day, monthUkr, year, time, time2, time3] = cleanedDateStr.split(' ');\r\n   \r\n    const monthEng = translateUkrainianMonthToEnglish(monthUkr);\r\n\r\n    // const formattedDateStr = `${monthEng} ${day}, ${year} ${time3}.000+00:00`;\r\n    const formattedDateStr = `${monthEng} ${day}, ${year} ${time3}`;\r\n\r\n    return new Date(formattedDateStr).toUTCString();\r\n}\r\n\r\n\r\n\r\nconst formatDateToUkrainian = (dateStr) => {\r\n    const date = new Date(dateStr);\r\n    const day = date.getUTCDate();\r\n    const monthNames = ['січня', 'лютого', 'березня', 'квітня', 'травня', 'червня', 'липня', 'серпня', 'вересня', 'жовтня', 'листопада', 'грудня'];\r\n    const month = monthNames[date.getUTCMonth()];\r\n    const year = date.getUTCFullYear();\r\n    const hours = String(date.getUTCHours()).padStart(2, '0');\r\n    const minutes = String(date.getUTCMinutes()).padStart(2, '0');\r\n  \r\n    return `${day} ${month} ${year} р. о ${hours}:${minutes}`;\r\n  };\r\n\r\nexport {parseUkrainianDate, formatDateToUkrainian};","import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport DatePicker from 'react-datepicker'; // Import DatePicker component\r\nimport 'react-datepicker/dist/react-datepicker.css'; // Import DatePicker CSS\r\nimport { Link } from 'react-router-dom';\r\nimport { formatDateToUkrainian, parseUkrainianDate } from '../../common/utils/smallFn/convertDate';\r\nimport LogoImg from '../../services/images/Group12.svg'\r\n\r\nimport './userProfile.css';\r\n\r\nconst UserProfile = () => {\r\n    const [user, setUser] = useState(null);\r\n    const [orders, setOrders] = useState([]);\r\n    const [teacherFilter, setTeacherFilter] = useState('');\r\n    const [uniqueTeachers, setUniqueTeachers] = useState([]);\r\n    const [selectedBookingDate, setSelectedBookingDate] = useState(null);\r\n    const [highlightedBookingDates, setHighlightedBookingDates] = useState([]);\r\n\r\n    const schoolId = localStorage.getItem('schoolId')\r\n\r\n    useEffect(() => {\r\n        fetchUserData(setUser, axios, setOrders);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        // After loading orders, extract unique teacher names and marked dates\r\n        if (orders.length > 0) {\r\n            const allTeachers = orders.flatMap(order => {\r\n                try {\r\n                    const slots = order.time;\r\n                    return slots.map(slot => slot.teacherName);\r\n                } catch (e) {\r\n                    console.error('Invalid time format:', order.time);\r\n                    return [];\r\n                }\r\n            });\r\n            setUniqueTeachers([...new Set(allTeachers)]);\r\n\r\n            const dates = orders.flatMap(order => order.time.map(slot => new Date(slot.time)));\r\n            setHighlightedBookingDates([...new Set(dates)]);\r\n        }\r\n    }, [orders]);\r\n\r\n    const fetchUserData = async (setUser, axios, setOrders) => {\r\n        const token = localStorage.getItem('token');\r\n        console.log(token)\r\n        if (token) {\r\n            try {\r\n                const response = await axios.get('http://localhost:3001/api/me', {\r\n                    headers: { 'Authorization': `Bearer ${token}` }\r\n                });\r\n                const { user, orders } = response.data;\r\n                setUser(user);\r\n                setOrders(orders);\r\n            } catch (error) {\r\n                console.error('Error fetching user data:', error);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleLogout = async () => {\r\n        try {\r\n            const response = await axios.post('http://localhost:3001/api/logout');\r\n            if (response.status === 200) {\r\n                setUser(null);\r\n                setOrders([]);\r\n                localStorage.removeItem('token');\r\n                console.log('Logged out successfully');\r\n            }\r\n        } catch (error) {\r\n            console.error('Error logging out:', error);\r\n        }\r\n    };\r\n\r\n    // Filter orders by selected date\r\n    const filterByDate = (orders, date) => {\r\n        if (!date) return orders;\r\n        return orders.filter(order => {\r\n            const slots = order.time || [];\r\n            return slots.some(slot => new Date(slot.time).getDate(), new Date(selectedBookingDate).getDate());\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div className='mains'>\r\n            <div className='containers'>\r\n                <div className=\"user-profile\">\r\n                    <div className='logos'>\r\n                        <div className='logos-items'>\r\n                            <Link to={`/${schoolId}`}><img src={LogoImg} alt=\"Logo\" /></Link>\r\n                            {/* <div className='logo-names'>Мовна школа <span>EAGLES</span></div> */}\r\n                        </div>\r\n                    </div>\r\n                    <h2>Особистий кабінет</h2>\r\n                    {user ? (\r\n                        <>\r\n                            <strong>Вітаємо, {user.username}</strong>\r\n                            {/* <p>Email: {user.email}</p>\r\n                            <p>Телефон: {user.phone}</p> */}\r\n                            <h3>Ваші записи</h3>\r\n                            {/* \r\n                    <div>\r\n                        <button onClick={() => setTeacherFilter('')}>Показати всіх</button>\r\n                        {uniqueTeachers.map((teacher, idx) => (\r\n                            <button key={idx} onClick={() => setTeacherFilter(teacher)}>\r\n                                {teacher}\r\n                            </button>\r\n                        ))}\r\n                    </div> */}\r\n\r\n                            {/* DatePicker for date filtering */}\r\n                            <DatePicker\r\n                                selected={selectedBookingDate}\r\n                                onChange={(date) => setSelectedBookingDate(date)}\r\n                                dateFormat=\"yyyy-MM-dd\"\r\n                                isClearable\r\n                                placeholderText=\"Виберіть дату для фільтрації записів\"\r\n                                inline\r\n                                highlightDates={highlightedBookingDates}\r\n                            />\r\n\r\n                            {/* Filtered orders by selected date */}\r\n                            {selectedBookingDate && <p>Вибрана дата: {selectedBookingDate.toLocaleDateString()}</p>}\r\n\r\n                            {orders.length > 0 ? (\r\n                                <ul className=\"orders-list\">\r\n\r\n                                    {filterByDate(orders, selectedBookingDate)\r\n                                        .map((order, index) => {\r\n                                            let formattedSlots = [];\r\n\r\n                                            try {\r\n                                                const slots = order.time;\r\n                                                formattedSlots = slots.map(slot => ({\r\n                                                    teacherName: slot.teacherName,\r\n                                                    lang: slot.lang,\r\n                                                    levelName: slot.levelName,\r\n                                                    lessonTypes: slot.lessonTypes,\r\n                                                    time: formatDateToUkrainian(slot.time),\r\n                                                    payment_status: slot.payment_status\r\n                                                }));\r\n                                            } catch (e) {\r\n                                                console.error('Invalid time format:', order.time);\r\n                                            }\r\n\r\n                                            const filteredSlots = formattedSlots\r\n                                                ? formattedSlots.filter(slot => {\r\n                                                    const slotDate = new Date(parseUkrainianDate(slot.time));\r\n                                                    return slotDate instanceof Date && !isNaN(slotDate) &&\r\n                                                        selectedBookingDate instanceof Date && !isNaN(selectedBookingDate) &&\r\n                                                        slotDate.getDate() === selectedBookingDate.getDate();\r\n                                                })\r\n                                                : [];\r\n\r\n                                            // Условие для предотвращения рендера пустого заказа\r\n                                            if (filteredSlots.length === 0) return null;\r\n                                            console.log(filteredSlots)\r\n                                            return (\r\n                                                <li key={index}>\r\n\r\n                                                    <ul>\r\n                                                        {filteredSlots.map((slot, idx) => (\r\n                                                            <li key={idx} style={{ marginBottom: '10px' }}>\r\n                                                                <div className='order-item'>\r\n                                                                    <strong>Запис на урок:</strong>\r\n                                                                    <div className='order-item-el'><div className='order-item-el-head'>Вчитель:</div> <div className='order-item-el-desc'>{slot.teacherName}</div></div>\r\n                                                                    <div className='order-item-el'><div className='order-item-el-head'>Мова:</div> <div className='order-item-el-desc'>{slot.lang}</div></div>\r\n                                                                    <div className='order-item-el'><div className='order-item-el-head'>Рівень:</div> <div className='order-item-el-desc'>{slot.levelName}</div></div>\r\n                                                                    <div className='order-item-el'><div className='order-item-el-head'>Тип уроку:</div> <div className='order-item-el-desc'>{slot.lessonTypes}</div></div>\r\n                                                                    <div className='order-item-el'><div className='order-item-el-head'>Час:</div> <div className='order-item-el-desc'>{slot.time}</div></div>\r\n                                                                    <div className='order-item-el'><div className='order-item-el-head'>Статус оплати:</div> <div className='order-item-el-desc'>{slot.payment_status}</div></div>\r\n                                                                </div>\r\n                                                                {order.students.length > 0 && (\r\n                                                                    <div className='students-list' style={{ marginTop: '10px' }}>\r\n                                                                        <div className='students-head'>Студенти:</div>\r\n                                                                        <ul>\r\n                                                                            {order.students.map((student, studentIdx) => (\r\n                                                                                <li key={studentIdx}>\r\n                                                                                    <div className='student-name'>{student.name}</div>\r\n                                                                                </li>\r\n                                                                            ))}\r\n                                                                        </ul>\r\n                                                                    </div>\r\n                                                                )}\r\n\r\n                                                            </li>\r\n                                                        ))}\r\n                                                    </ul>\r\n                                                </li>\r\n                                            );\r\n                                        })}\r\n\r\n                                </ul>\r\n                            ) : (\r\n                                <p>Замовлення відсутні.</p>\r\n                            )}\r\n                        </>\r\n                    ) : (\r\n                        <p>Завантаження даних користувача...</p>\r\n                    )}\r\n\r\n                    <Link to={`/${schoolId}`}>\r\n                        <button className=\"btn-logout\" onClick={handleLogout}>Вийти</button>\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default UserProfile;\r\n"],"names":["parseUkrainianDate","dateStr","cleanedDateStr","replace","trim","console","log","day","monthUkr","year","time","time2","time3","split","monthEng","Date","toUTCString","formatDateToUkrainian","date","getUTCDate","getUTCMonth","getUTCFullYear","String","getUTCHours","padStart","getUTCMinutes","UserProfile","user","setUser","useState","orders","setOrders","teacherFilter","setTeacherFilter","uniqueTeachers","setUniqueTeachers","selectedBookingDate","setSelectedBookingDate","highlightedBookingDates","setHighlightedBookingDates","schoolId","localStorage","getItem","useEffect","fetchUserData","axios","length","allTeachers","flatMap","order","map","slot","teacherName","e","error","Set","dates","async","token","response","get","headers","data","_jsx","className","children","_jsxs","Link","to","src","LogoImg","alt","_Fragment","username","DatePicker","selected","onChange","dateFormat","isClearable","placeholderText","inline","highlightDates","toLocaleDateString","filterByDate","filter","some","getDate","index","formattedSlots","lang","levelName","lessonTypes","payment_status","filteredSlots","slotDate","isNaN","idx","style","marginBottom","students","marginTop","student","studentIdx","name","onClick","post","status","removeItem"],"sourceRoot":""}
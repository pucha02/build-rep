"use strict";(self.webpackChunkrlc=self.webpackChunkrlc||[]).push([[945],{3945:(e,l,a)=>{a.r(l),a.d(l,{default:()=>r});var t=a(3216),s=a(5043),n=a(6213),i=a(579);const c=e=>{let{schoolId:l,fetchSchool:a,editingLang:t,setEditingLang:c}=e;const[d,o]=(0,s.useState)(""),[r,u]=(0,s.useState)(""),[p,h]=(0,s.useState)([]),[m,g]=(0,s.useState)(null),[v,x]=(0,s.useState)(null),[j,N]=(0,s.useState)("");(0,s.useEffect)((()=>{t&&(o(t.lang),h(t.level))}),[t]);const y=()=>{o(""),h([]),N(""),u(""),c(null)};return(0,i.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const s=t?`http://13.60.221.226/api/editLanguageForSchool/${l}/${t.id}`:"http://13.60.221.226/api/addLanguageForSchool",i={id:l,lang:d,levels:p};try{await n.A.put(s,i,{headers:{"Content-Type":"application/json"}}),a(),y()}catch(c){console.error("Error saving language:",c)}},className:"language-form",children:[(0,i.jsx)("h1",{children:t?"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u043c\u043e\u0432\u0443":"\u0414\u043e\u0434\u0430\u0442\u0438 \u043c\u043e\u0432\u0443"}),(0,i.jsx)("div",{className:"input-group",children:(0,i.jsx)("input",{type:"text",value:d,onChange:e=>o(e.target.value),placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043c\u043e\u0432\u0443",className:"input-field"})}),(0,i.jsxs)("div",{className:"input-group",children:[(0,i.jsx)("input",{type:"text",value:r,onChange:e=>u(e.target.value),placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043a\u0443\u0440\u0441",className:"input-field"}),(0,i.jsx)("button",{type:"button",onClick:()=>{const e={id:Date.now(),levelName:r,lessonTypes:[]};h([...p,e]),u("")},className:"add-button",children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u043a\u0443\u0440\u0441"})]}),(0,i.jsxs)("div",{className:"levels-list",children:[(0,i.jsx)("h3",{children:"\u0414\u043e\u0434\u0430\u043d\u0456 \u043a\u0443\u0440\u0441\u0438:"}),(0,i.jsxs)("ul",{children:[(0,i.jsx)("h4",{children:"\u0414\u043e\u0434\u0430\u0439\u0442\u0435 \u0442\u0430 \u043e\u0431\u0435\u0440\u0456\u0442\u044c \u043a\u0443\u0440\u0441 \u0434\u043b\u044f \u0434\u043e\u0434\u0430\u0432\u0430\u043d\u043d\u044f \u0442\u0438\u043f\u0443 \u0437\u0430\u043d\u044f\u0442\u044c \u0442\u0430 \u0446\u0456\u043d\u0438"}),p.map((e=>(0,i.jsxs)("li",{className:"level-item",children:[(0,i.jsx)("input",{type:"text",value:e.levelName,onChange:l=>{return a=e.id,t=l.target.value,void h(p.map((e=>e.id===a?{...e,levelName:t}:e)));var a,t},className:"input-field",placeholder:"\u041d\u0430\u0437\u0432\u0430 \u043a\u0443\u0440\u0441\u0443"}),(0,i.jsx)("ul",{children:e.lessonTypes.map((l=>(0,i.jsxs)("li",{children:[(0,i.jsx)("input",{type:"text",value:l.typeName,onChange:a=>{return t=e.id,s=l.id,n=a.target.value,void h(p.map((e=>e.id===t?{...e,lessonTypes:e.lessonTypes.map((e=>e.id===s?{...e,typeName:n}:e))}:e)));var t,s,n},className:"input-field",disabled:!0}),(0,i.jsx)("input",{type:"number",value:l.price,onChange:a=>{return t=e.id,s=l.id,n=a.target.value,void h(p.map((e=>e.id===t?{...e,lessonTypes:e.lessonTypes.map((e=>e.id===s?{...e,price:n}:e))}:e)));var t,s,n},className:"input-field",placeholder:"\u0426\u0456\u043d\u0430"}),(0,i.jsx)("button",{onClick:()=>{return a=e.id,t=l.id,void h(p.map((e=>e.id===a?{...e,lessonTypes:e.lessonTypes.filter((e=>e.id!==t))}:e)));var a,t},className:"delete-button",children:"\u2716"})]},l.id)))}),(0,i.jsx)("button",{type:"button",onClick:()=>x(e.id),className:"select-button "+(v===e.id?"selected":""),children:v===e.id?"\u041e\u0431\u0440\u0430\u043d\u043e":"\u041e\u0431\u0440\u0430\u0442\u0438"})]},e.id)))]})]}),v&&(0,i.jsxs)("div",{className:"input-group",children:[(0,i.jsxs)("select",{value:j,onChange:e=>N(e.target.value),className:"input-field",children:[(0,i.jsx)("option",{value:"",disabled:!0,children:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0442\u0438\u043f \u0437\u0430\u043d\u044f\u0442\u044c"}),(0,i.jsx)("option",{value:"\u0406\u043d\u0434\u0438\u0432\u0456\u0434\u0443\u0430\u043b\u044c\u043d\u0456",children:"\u0406\u043d\u0434\u0438\u0432\u0456\u0434\u0443\u0430\u043b\u044c\u043d\u0456"}),(0,i.jsx)("option",{value:"\u041f\u0430\u0440\u043d\u0456",children:"\u041f\u0430\u0440\u043d\u0456"}),(0,i.jsx)("option",{value:"\u0413\u0440\u0443\u043f\u043e\u0432\u0456",children:"\u0413\u0440\u0443\u043f\u043e\u0432\u0456"})]}),(0,i.jsx)("input",{type:"number",value:m,onChange:e=>g(e.target.value),placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0446\u0456\u043d\u0443",className:"input-field"}),(0,i.jsx)("button",{type:"button",onClick:()=>{null!==v&&null!==m&&(h(p.map((e=>e.id===v?{...e,lessonTypes:[...e.lessonTypes,{id:Date.now(),typeName:j,price:m}]}:e))),N(""),g(""))},className:"add-button",children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0442\u0438\u043f \u0437\u0430\u043d\u044f\u0442\u044c \u0434\u043e \u0432\u0438\u0431\u0440\u0430\u043d\u043e\u0433\u043e \u0440\u0456\u0432\u043d\u044f"})]}),(0,i.jsx)("button",{type:"submit",className:"submit-button",children:t?"\u041e\u043d\u043e\u0432\u0438\u0442\u0438 \u0434\u0430\u043d\u0456":"\u0414\u043e\u0434\u0430\u0442\u0438 \u043c\u043e\u0432\u0443"}),t&&(0,i.jsx)("button",{type:"button",onClick:y,className:"cancel-button",children:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438"})]})},d=e=>{let{schoolId:l,fetchSchool:a,editingTeacher:t,setEditingTeacher:c,teacherId:d,school:o}=e;const[r,u]=(0,s.useState)(""),[p,h]=(0,s.useState)(""),[m,g]=(0,s.useState)(""),[v,x]=(0,s.useState)([]),[j,N]=(0,s.useState)(""),[y,b]=(0,s.useState)(""),[f,C]=(0,s.useState)(""),[S,T]=(0,s.useState)("");(0,s.useEffect)((()=>{t&&(u(t.teacherName),h(t.teacherImg),x(t.lang))}),[t]);return(0,i.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const s=t?`http://13.60.221.226/api/updateTeacher/${l}`:"http://13.60.221.226/api/addTeacherForSchool";try{await n.A.put(s,{id:l,teacherName:r,teacherImg:p,langs:v,teacherId:d},{headers:{"Content-Type":"application/json"}}),a(),u(""),h(""),g(""),x([]),c(null)}catch(i){console.error(i)}},className:"add-teacher-form",children:[(0,i.jsx)("h1",{children:t?"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0432\u0447\u0438\u0442\u0435\u043b\u044f":"\u0414\u043e\u0434\u0430\u0442\u0438 \u0432\u0447\u0438\u0442\u0435\u043b\u044f"}),(0,i.jsx)("input",{className:"input-field",type:"text",value:r,onChange:e=>u(e.target.value),placeholder:"\u0406\u043c'\u044f \u0432\u0447\u0438\u0442\u0435\u043b\u044f"}),(0,i.jsx)("input",{className:"input-field",type:"text",value:p,onChange:e=>h(e.target.value),placeholder:"\u041f\u043e\u0441\u0438\u043b\u0430\u043d\u043d\u044f \u043d\u0430 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0456\u044e (\u043d\u0430\u043f\u0440. https://i.postimg.cc/63c0Qbkn/image.jpg)"}),(0,i.jsxs)("div",{className:"lang-input-group",children:[(0,i.jsxs)("select",{value:y,onChange:e=>{const l=o.ESL.language.find((l=>l.id===e.target.value));b(e.target.value),g((null===l||void 0===l?void 0:l.lang)||"")},className:"select-field",children:[(0,i.jsx)("option",{value:"",children:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u043c\u043e\u0432\u0443"}),o.ESL.language.map((e=>(0,i.jsx)("option",{value:e.id,children:e.lang},e.id)))]}),(0,i.jsx)("button",{type:"button",onClick:()=>{const e={id:Date.now().toString(),lang:m,level:[]};x([...v,e]),g("")},className:"add-lang-btn",children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u043c\u043e\u0432\u0443"})]}),(0,i.jsxs)("div",{className:"langs-list",children:[(0,i.jsx)("h3",{children:"\u0414\u043e\u0434\u0430\u043d\u0456 \u043c\u043e\u0432\u0438:"}),(0,i.jsx)("ul",{children:v.map((e=>(0,i.jsxs)("li",{className:"lang-item",children:[(0,i.jsx)("input",{type:"text",value:e.lang,onChange:l=>{return a=e.id,t=l.target.value,void x(v.map((e=>e.id===a?{...e,lang:t}:e)));var a,t},placeholder:"Edit Language"}),(0,i.jsx)("button",{className:"delete-btn",onClick:()=>{return l=e.id,void x(v.filter((e=>e.id!==l)));var l},children:"\u2716"}),(0,i.jsx)("ul",{children:e.level.length>0?e.level.map((l=>(0,i.jsxs)("li",{className:"level-item",children:[(0,i.jsx)("input",{type:"text",value:l.levelName,onChange:a=>{return t=e.id,s=l.id,n=a.target.value,void x(v.map((e=>e.id===t?{...e,level:e.level.map((e=>e.id===s?{...e,levelName:n}:e))}:e)));var t,s,n},placeholder:"Edit Level"}),(0,i.jsx)("button",{className:"delete-btn",onClick:()=>{return a=e.id,t=l.id,void x(v.map((e=>e.id===a?{...e,level:e.level.filter((e=>e.id!==t))}:e)));var a,t},children:"\u2716"}),(0,i.jsx)("ul",{children:l.lessonTypes.length>0?l.lessonTypes.map((a=>(0,i.jsxs)("li",{className:"class-type-item",children:[(0,i.jsx)("input",{type:"text",value:a.typeName,onChange:e=>{const t=l.lessonTypes.map((l=>l.id===a.id?{...l,lessonTypes:e.target.value}:l));x(v.map((e=>e.id===y?{...e,level:e.level.map((e=>e.id===S?{...e,lessonTypes:t}:e))}:e)))},placeholder:"Edit Class Type"}),(0,i.jsx)("button",{className:"delete-btn",onClick:()=>{return t=e.id,s=l.id,n=a.id,void x(v.map((e=>e.id===t?{...e,level:e.level.map((e=>e.id===s?{...e,lessonTypes:e.lessonTypes.filter((e=>e.id!==n))}:e))}:e)));var t,s,n},children:"\u2716"})]},a.id))):(0,i.jsx)("li",{children:"No class types added yet"})})]},l.id))):(0,i.jsx)("li",{children:"No levels added yet"})})]},e.id)))})]}),(0,i.jsxs)("div",{className:"add-level-group",children:[(0,i.jsxs)("select",{value:y,onChange:e=>{b(e.target.value)},className:"select-field",children:[(0,i.jsx)("option",{value:"",children:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u043c\u043e\u0432\u0443"}),v.map((e=>(0,i.jsx)("option",{value:e.lang,onChange:()=>g(e.lang),children:e.lang},e.id)))]}),(0,i.jsxs)("select",{value:j,onChange:e=>N(e.target.value),className:"select-field",children:[(0,i.jsx)("option",{value:"",children:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u043a\u0443\u0440\u0441"}),console.log(y),o.ESL.language.filter((e=>e.lang===y)).flatMap((e=>e.level)).map((e=>(0,i.jsx)("option",{value:e.levelName,children:e.levelName},e.levelName)))]}),(0,i.jsx)("button",{type:"button",onClick:()=>{if(!y)return void alert("\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u043c\u043e\u0432\u0443 \u0434\u043b\u044f \u0434\u043e\u043f\u043e\u0432\u043d\u0435\u043d\u043d\u044f \u0440\u0456\u0432\u043d\u044f");const e={id:Date.now().toString(),levelName:j,lessonTypes:[],date:[]};x(v.map((l=>l.lang===y?{...l,level:[...l.level,e]}:l))),N("")},className:"add-level-btn",children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u043a\u0443\u0440\u0441"})]}),(0,i.jsxs)("div",{className:"add-class-type-group",children:[(0,i.jsxs)("select",{value:S,onChange:e=>T(e.target.value),className:"select-field",children:[(0,i.jsx)("option",{value:"",children:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u043a\u0443\u0440\u0441"}),v.filter((e=>e.lang===y)).flatMap((e=>e.level)).map((e=>(0,i.jsx)("option",{value:e.levelName,children:e.levelName},e.id)))]}),(0,i.jsxs)("select",{value:f,onChange:e=>C(e.target.value),className:"select-field",children:[(0,i.jsx)("option",{value:"",children:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0442\u0438\u043f \u0437\u0430\u043d\u044f\u0442\u044c"}),o.ESL.language.filter((e=>e.lang===y)).flatMap((e=>e.level)).filter((e=>e.levelName===S)).flatMap((e=>e.lessonTypes)).map((e=>(0,i.jsx)("option",{value:e.typeName,children:e.typeName},e.typeName)))]}),(0,i.jsx)("button",{type:"button",onClick:()=>{if(!S)return void alert("\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0440\u0456\u0432\u0435\u043d\u044c \u0434\u043b\u044f \u0434\u043e\u043f\u043e\u0432\u043d\u0435\u043d\u043d\u044f \u0442\u0438\u043f\u0443 \u0437\u0430\u0439\u043d\u044f\u0442\u043e\u0441\u0442\u0435\u0439");const e={id:Date.now().toString(),typeName:f};x(v.map((l=>l.lang===y?{...l,level:l.level.map((l=>l.levelName===S?{...l,lessonTypes:[...l.lessonTypes,e]}:l))}:l))),C("")},className:"add-class-type-btn",children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0442\u0438\u043f \u0437\u0430\u043d\u044f\u0442\u044c"})]}),(0,i.jsx)("button",{type:"submit",className:"submit-btn",children:t?"\u041e\u043d\u043e\u0432\u0438\u0442\u0438 \u0432\u0447\u0438\u0442\u0435\u043b\u044f":"\u0414\u043e\u0434\u0430\u0442\u0438 \u0432\u0447\u0438\u0442\u0435\u043b\u044f"})]})},o=()=>{const[e,l]=(0,s.useState)(null),[a,o]=(0,s.useState)(null),[r,u]=(0,s.useState)(null),[p,h]=(0,s.useState)(null),m=(0,t.zy)(),{schoolId:g}=m.state||{};console.log(g);const v=async()=>{const e=await n.A.get(`http://13.60.221.226/api/schools/${g}`);l(e.data[0]),console.log(e.data)};(0,s.useEffect)((()=>{v()}),[g]);return e?(0,i.jsxs)("div",{className:"school-detail",children:[(0,i.jsx)("h2",{className:"school-name",children:e.ESL.schoolName}),(0,i.jsx)("h3",{children:"\u041c\u043e\u0432\u0438:"}),(0,i.jsx)("ul",{className:"language-list",children:e.ESL.language.map((e=>(0,i.jsxs)("li",{className:"language-item",children:[e.lang,(0,i.jsx)("button",{onClick:()=>(async e=>{try{await n.A.delete(`http://13.60.221.226/api/deleteLanguageFromSchool/${g}/${e}`),v()}catch(l){console.error("Error deleting language:",l)}})(e.id),className:"delete-button",children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"}),(0,i.jsx)("button",{onClick:()=>o(e),className:"edit-button",children:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438"}),(0,i.jsx)("ul",{children:e.level.map((l=>(0,i.jsxs)("li",{className:"level-item",children:[l.levelName,(0,i.jsx)("button",{onClick:()=>(async(e,l)=>{try{await n.A.delete(`http://13.60.221.226/api/deleteLevelFromLanguage/${g}/${e}/${l}`),v()}catch(a){console.error("Error deleting level:",a)}})(e.id,l.id),className:"delete-button",children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"}),(0,i.jsx)("ul",{children:l.lessonTypes.map((a=>(0,i.jsxs)("li",{className:"class-type-item",children:[a.typeName,console.log(a.id),(0,i.jsx)("button",{onClick:()=>(async(e,l,a)=>{try{console.log(e,l,a),await n.A.delete(`http://13.60.221.226/api/deleteClassTypeFromLevel/${g}`,{data:{languageId:e,levelId:l,classTypeId:a}}),v()}catch(t){console.error("Error deleting class type:",t)}})(e.id,l.id,a.id),className:"delete-button",children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"})]},a.id)))})]},l.id)))})]},e.id)))}),(0,i.jsx)("h3",{children:"Teachers:"}),(0,i.jsx)("ul",{className:"teacher-list",children:e.ESL.teacher.map((e=>(0,i.jsxs)("li",{className:"teacher-item",children:[e.data.teacherName,(0,i.jsx)("button",{onClick:()=>(async e=>{try{await n.A.delete(`http://13.60.221.226/api/deleteTeacherFromSchool/${g}/${e}`),v()}catch(l){console.error("Error deleting teacher:",l)}})(e.data.teacherId),className:"delete-button",children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"}),(0,i.jsx)("button",{onClick:()=>((e,l)=>{u(e),h(l)})(e.data,e.data.teacherId),className:"edit-button",children:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438"})]},e.data.teacherId)))}),(0,i.jsx)(c,{schoolId:g,fetchSchool:v,editingLang:a,setEditingLang:o}),(0,i.jsx)(d,{schoolId:g,fetchSchool:v,editingTeacher:r,setEditingTeacher:u,teacherId:p,school:e})]}):(0,i.jsx)("p",{children:"Loading..."})},r=()=>{const{id:e}=(0,t.g)();return(0,i.jsx)(o,{schoolId:e})}}}]);
//# sourceMappingURL=945.dac8c2a3.chunk.js.map
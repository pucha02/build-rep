(self.webpackChunkrlc=self.webpackChunkrlc||[]).push([[716],{5501:(e,s,l)=>{"use strict";l.d(s,{r:()=>t,u:()=>a});l(2573);function a(e){const s=e.replace("\u0440.","").replace("\u043e","").trim();console.log(s);const[l,a,t,r,n,c]=s.split(" "),i={"\u0441\u0456\u0447\u043d\u044f":"January","\u043b\u044e\u0442\u043e\u0433\u043e":"February","\u0431\u0435\u0440\u0435\u0437\u043d\u044f":"March","\u043a\u0432\u0456\u0442\u043d\u044f":"April","\u0442\u0440\u0430\u0432\u043d\u044f":"May","\u0447\u0435\u0440\u0432\u043d\u044f":"June","\u043b\u0438\u043f\u043d\u044f":"July","\u0441\u0435\u0440\u043f\u043d\u044f":"August","\u0432\u0435\u0440\u0435\u0441\u043d\u044f":"September","\u0436\u0432\u0442\u043d\u044f":"October","\u043b\u0438\u0441\u0442\u043f\u0430\u0434\u0430":"November","\u0433\u0440\u0443\u0434\u043d\u044f":"December"}[a];return new Date(`${i} ${l}, ${t} ${c}`).toUTCString()}const t=e=>{const s=new Date(e);return`${s.getUTCDate()} ${["\u0441\u0456\u0447\u043d\u044f","\u043b\u044e\u0442\u043e\u0433\u043e","\u0431\u0435\u0440\u0435\u0437\u043d\u044f","\u043a\u0432\u0456\u0442\u043d\u044f","\u0442\u0440\u0430\u0432\u043d\u044f","\u0447\u0435\u0440\u0432\u043d\u044f","\u043b\u0438\u043f\u043d\u044f","\u0441\u0435\u0440\u043f\u043d\u044f","\u0432\u0435\u0440\u0435\u0441\u043d\u044f","\u0436\u043e\u0432\u0442\u043d\u044f","\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434\u0430","\u0433\u0440\u0443\u0434\u043d\u044f"][s.getUTCMonth()]} ${s.getUTCFullYear()} \u0440. \u043e ${String(s.getUTCHours()).padStart(2,"0")}:${String(s.getUTCMinutes()).padStart(2,"0")}`}},6192:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>S});var a=l(5043),t=l(3216),r=l(5501),n=l(579);const c=(e,s,l,a,t,c,i,d,o)=>{const h=localStorage.getItem("selectedSlots");if(h)try{const e=JSON.parse(h);return Array.isArray(e)?(0,n.jsxs)("div",{children:[(0,n.jsx)("ul",{style:{backgroundColor:"#F4F4F4"},className:"resultList",children:(0,n.jsxs)("li",{children:[(0,n.jsx)("div",{className:"resultEl",children:(0,n.jsx)("div",{className:"resultHead",children:"\u041c\u043e\u0432\u0430"})}),(0,n.jsx)("div",{className:"resultEl",children:(0,n.jsx)("div",{className:"resultHead",children:"\u0420\u0456\u0432\u0435\u043d\u044c"})}),(0,n.jsx)("div",{className:"resultEl",children:(0,n.jsx)("div",{className:"resultHead",children:"\u0422\u0438\u043f \u0443\u0440\u043e\u043a\u0443"})}),(0,n.jsx)("div",{className:"resultEl",children:(0,n.jsx)("div",{className:"resultHead",children:"\u0412\u0447\u0438\u0442\u0435\u043b\u044c"})}),(0,n.jsx)("div",{className:"resultEl",children:(0,n.jsx)("div",{className:"resultHead",children:"\u0414\u0430\u0442\u0430"})}),(0,n.jsx)("div",{className:"resultEl",children:(0,n.jsx)("div",{className:"resultHead",children:"\u0412\u0430\u0440\u0442\u0456\u0441\u0442\u044c"})})]})}),(0,n.jsx)("div",{className:"order-ul",children:e.map(((e,s)=>{const[l,a,t,c,i,d,h]=e.split(", "),u=(0,r.r)(d);return console.log(e),(0,n.jsx)("ul",{className:"resultList",children:(0,n.jsxs)("li",{children:[(0,n.jsxs)("div",{className:"resultEl",children:[(0,n.jsx)("div",{className:"resultHeadMob",children:"\u041c\u043e\u0432\u0430"}),(0,n.jsx)("div",{className:"resultItem",children:t})]}),(0,n.jsxs)("div",{className:"resultEl",children:[(0,n.jsx)("div",{className:"resultHeadMob",children:"\u0420\u0456\u0432\u0435\u043d\u044c"}),(0,n.jsx)("div",{className:"resultItem",children:c})]}),(0,n.jsxs)("div",{className:"resultEl",children:[(0,n.jsx)("div",{className:"resultHeadMob",children:"\u0422\u0438\u043f \u0443\u0440\u043e\u043a\u0443"}),(0,n.jsx)("div",{className:"resultItem",children:i})]}),(0,n.jsxs)("div",{className:"resultEl",children:[(0,n.jsx)("div",{className:"resultHeadMob",children:"\u0412\u0447\u0438\u0442\u0435\u043b\u044c"}),(0,n.jsx)("div",{className:"resultItem",children:l})]}),(0,n.jsxs)("div",{className:"resultEl",children:[(0,n.jsx)("div",{className:"resultHeadMob",children:"\u0414\u0430\u0442\u0430"}),(0,n.jsx)("div",{className:"resultItem",children:u})]}),(0,n.jsxs)("div",{className:"resultEl",children:[(0,n.jsx)("div",{className:"resultHeadMob",children:"\u0412\u0430\u0440\u0442\u0456\u0441\u0442\u044c"}),(0,n.jsxs)("div",{className:"resultItem",children:[o," \u0433\u0440\u043d"]})]})]})},s)}))}),(0,n.jsxs)("div",{className:"totalPrice",children:["\u0414\u041e \u0421\u041f\u041b\u0410\u0422\u0418: ",e.length*o*i," \u0433\u0440\u043d"]})]}):(0,n.jsx)("p",{children:"No valid slots found."})}catch(u){return console.error("Error parsing selectedSlots",u),(0,n.jsx)("p",{children:"Error retrieving slots."})}else{const e=localStorage.getItem("selectedDates");if(e)try{const a=JSON.parse(e);return Array.isArray(a)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("ul",{style:{backgroundColor:"#F4F4F4"},className:"resultList",children:(0,n.jsxs)("li",{children:[(0,n.jsx)("div",{className:"resultEl",children:(0,n.jsx)("div",{className:"resultHead",children:"\u041c\u043e\u0432\u0430"})}),(0,n.jsx)("div",{className:"resultEl",children:(0,n.jsx)("div",{className:"resultHead",children:"\u0420\u0456\u0432\u0435\u043d\u044c"})}),(0,n.jsx)("div",{className:"resultEl",children:(0,n.jsx)("div",{className:"resultHead",children:"\u0422\u0438\u043f \u0443\u0440\u043e\u043a\u0443"})}),(0,n.jsx)("div",{className:"resultEl",children:(0,n.jsx)("div",{className:"resultHead",children:"\u0412\u0447\u0438\u0442\u0435\u043b\u044c"})}),(0,n.jsx)("div",{className:"resultEl",children:(0,n.jsx)("div",{className:"resultHead",children:"\u0414\u0430\u0442\u0430"})}),(0,n.jsx)("div",{className:"resultEl",children:(0,n.jsx)("div",{className:"resultHead",children:"\u0412\u0430\u0440\u0442\u0456\u0441\u0442\u044c"})})]})}),(0,n.jsx)("div",{className:"order-ul",children:a.map(((e,a)=>(0,n.jsx)("ul",{className:"resultList",children:(0,n.jsxs)("li",{children:[(0,n.jsxs)("div",{className:"resultEl",children:[(0,n.jsx)("div",{className:"resultHeadMob",children:"\u041c\u043e\u0432\u0430"}),(0,n.jsx)("div",{className:"resultItem",children:l})]}),(0,n.jsxs)("div",{className:"resultEl",children:[(0,n.jsx)("div",{className:"resultHeadMob",children:"\u0420\u0456\u0432\u0435\u043d\u044c"}),(0,n.jsx)("div",{className:"resultItem",children:s})]}),(0,n.jsxs)("div",{className:"resultEl",children:[(0,n.jsx)("div",{className:"resultHeadMob",children:"\u0422\u0438\u043f \u0443\u0440\u043e\u043a\u0443"}),(0,n.jsx)("div",{className:"resultItem",children:c})]}),(0,n.jsxs)("div",{className:"resultEl",children:[(0,n.jsx)("div",{className:"resultHeadMob",children:"\u0412\u0447\u0438\u0442\u0435\u043b\u044c"}),(0,n.jsx)("div",{className:"resultItem",children:t})]}),(0,n.jsxs)("div",{className:"resultEl",children:[(0,n.jsx)("div",{className:"resultHeadMob",children:"\u0414\u0430\u0442\u0430"}),(0,n.jsx)("div",{className:"resultItem",children:e})]}),(0,n.jsxs)("div",{className:"resultEl",children:[(0,n.jsx)("div",{className:"resultHeadMob",children:"\u0412\u0430\u0440\u0442\u0456\u0441\u0442\u044c"}),(0,n.jsxs)("div",{className:"resultItem",children:[o," \u0433\u0440\u043d"]})]})]})},a)))}),(0,n.jsxs)("div",{className:"totalPrice",children:["\u0414\u041e \u0421\u041f\u041b\u0410\u0422\u0418: ",a.length*o*i," \u0433\u0440\u043d"]})]}):(0,n.jsx)("p",{children:"No valid times found."})}catch(u){return console.error("Error parsing selectedTimes",u),(0,n.jsx)("p",{children:"Error retrieving times."})}}return(0,n.jsx)("p",{children:"No selected slots or times found."})};var i=l(6111),d=l.n(i);const o=e=>{const s={public_key:"sandbox_i38312250017",version:"3",action:"pay",subscribe_periodicity:"month",amount:"55",currency:"UAH",description:"Description",order_id:e,sandbox:"sandbox",return_url:"http://localhost:3000/final"},l=btoa(JSON.stringify(s)),a=`sandbox_FRDaasO0MmnhPbbp9U3d8DylKxr6ah8ppwkWKCcY${l}sandbox_FRDaasO0MmnhPbbp9U3d8DylKxr6ah8ppwkWKCcY`;return`https://www.liqpay.ua/api/3/checkout?data=${l}&signature=${d().SHA1(a).toString(d().enc.Base64)}`};var h=l(6213);const u=async e=>{let{username:s,email:l,phone:a,order:t,time:n,lang:c,levelName:i,teacherId:d,teacherName:o,lessonTypes:u,selectedSlots:m,count:x,students:j,setMessage:v,setErrorMessage:p}=e;try{const e=await h.A.post("http://localhost:3001/api/registerorder",{username:s,email:l,phone:a,order:t,time:n,lang:c,levelName:i,teacherId:d,teacherName:o,lessonTypes:u,selectedSlots:m,count:x,students:j,payment_status:"\u041d\u0435 \u043e\u043f\u043b\u0430\u0447\u0435\u043d\u043e"});if(201===e.status){v(`\u0427\u0430\u0441 \u0437\u0430\u0431\u0440\u043e\u043d\u044c\u043e\u0432\u0430\u043d\u043e: ${e.data.unBookedSlots.map((e=>(0,r.r)(e))).join(", ")}`)}}catch(N){if(N.response&&400===N.response.status){const e=N.response.data.bookedSlots.map((e=>(0,r.r)(e))),s=N.response.data.unBookedSlots.map((e=>(0,r.r)(e)));let l=`\u0412\u0438 \u0432\u0436\u0435 \u043c\u0430\u0454\u0442\u0435 \u0437\u0430\u043f\u0438\u0441 \u043d\u0430 \u0447\u0430\u0441: ${e.join(", ")}`;s.length>0&&(l+=`\n\u0423\u0441\u043f\u0456\u0448\u043d\u043e \u0437\u0430\u0431\u0440\u043e\u043d\u044c\u043e\u0432\u0430\u043d\u0456: ${s.join(", ")}`),p(l)}else p(N.response?N.response.data.error:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")}};var m=l(5475),x=(l(8571),l(2064)),j=l(1),v=l(6383);l(6412),l(3953);const p=async function(e,s){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,t=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;const n=localStorage.getItem("token");if(n)try{const c=await s.get("http://localhost:3001/api/me",{headers:{Authorization:`Bearer ${n}`}});console.log("Response Data:",c.data);const{user:i,orders:d}=c.data;e(i),l(i.username),a(i.email),t(i.phone),r(d)}catch(c){console.error("Error fetching user data:",c)}};var N=l(2508),g=l(8643),b=l(8929);const S=()=>{const[e,s]=(0,a.useState)(""),[l,i]=(0,a.useState)(""),[d,S]=(0,a.useState)(""),[y,f]=(0,a.useState)(""),[E,I]=(0,a.useState)(null),[k,H]=(0,a.useState)(""),[C,M]=(0,a.useState)(""),[A,$]=(0,a.useState)(""),[w,_]=(0,a.useState)(""),[D,F]=(0,a.useState)(null),[T,O]=(0,a.useState)(null),[U,B]=(0,a.useState)(null),[J,L]=(0,a.useState)([]),[K,P]=(0,a.useState)(!1),[R,Y]=(0,a.useState)("login"),[z,W]=(0,a.useState)(!1),[q,G]=(0,a.useState)(null),[Q,V]=(0,a.useState)(),[X,Z]=(0,a.useState)(0),[ee,se]=(0,a.useState)(!1),le=(0,t.zy)(),{language:ae,level:te,lang_from_general_cal:re,teacherId:ne,teacherName:ce,lessonTypes:ie,count:de,schoolId:oe,price:he,logo:ue,name:me}=le.state||{};console.log(he),(0,a.useEffect)((()=>{const s=setInterval((async()=>{try{const t=await h.A.get("http://localhost:3001/api/checkpaymentstatus",{params:{orderId:Q}});if(console.log(t.data),"success"===t.data){try{G("\u041e\u043f\u043b\u0430\u0447\u0435\u043d\u043e"),M("\u041e\u043f\u043b\u0430\u0442\u0443 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u043f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043d\u043e.");const s=await h.A.post("http://localhost:3001/api/registerorder",{username:e,email:l,phone:d,order:D,time:T,lang:y,levelName:k,teacherId:ne,teacherName:ce,lessonTypes:ie,selectedSlots:U,count:de,students:J,payment_status:"\u041e\u043f\u043b\u0430\u0447\u0435\u043d\u043e"});if(201===s.status){const e=s.data.unBookedSlots.map((e=>(0,r.r)(e)));M(`\u0427\u0430\u0441 \u0437\u0430\u0431\u0440\u043e\u043d\u044c\u043e\u0432\u0430\u043d\u043e: ${e.join(", ")}`)}}catch(a){if(a.response&&400===a.response.status){const e=a.response.data.bookedSlots.map((e=>(0,r.r)(e))),s=a.response.data.unBookedSlots.map((e=>(0,r.r)(e)));let l=`\u0412\u0438 \u0432\u0436\u0435 \u043c\u0430\u0454\u0442\u0435 \u0437\u0430\u043f\u0438\u0441 \u043d\u0430 \u0447\u0430\u0441: ${e.join(", ")}`;s.length>0&&(l+=`\n\u0423\u0441\u043f\u0456\u0448\u043d\u043e \u0437\u0430\u0431\u0440\u043e\u043d\u044c\u043e\u0432\u0430\u043d\u0456: ${s.join(", ")}`),$(l)}else $(a.response?a.response.data.error:"\u0412\u0438\u043d\u0438\u043a\u043b\u0430 \u043f\u043e\u043c\u0438\u043b\u043a\u0430")}clearInterval(s)}}catch(a){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u043e\u043f\u043b\u0430\u0442\u044b",a)}}),5e3);return()=>clearInterval(s)}),[Q]),(0,a.useEffect)((()=>{(async()=>{await p(I,h.A,s,i,S);const e=localStorage.getItem("data"),l=localStorage.getItem("selectedDates"),a=localStorage.getItem("selectedSlots");if(F(e),O(l),B(a),ae?f(ae):re&&f(re),H(te),de){const e=Array.from({length:de},(()=>({name:"",email:"",phone:""})));L(e)}})()}),[de]);const xe=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),je=(e,s,l)=>{const a=[...J];a[e][s]=l,L(a)},ve=function(){W(arguments.length>0&&void 0!==arguments[0]?arguments[0]:!z)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"main final",children:(0,n.jsxs)("div",{className:"container",children:[(0,n.jsx)("div",{className:"logo",children:(0,n.jsxs)("div",{className:"logo-items",children:[(0,n.jsx)(m.N_,{to:`/${oe}`,children:(0,n.jsx)("img",{src:ue,alt:"Logo"})}),(0,n.jsxs)("div",{className:"logo-name",children:["\u041c\u043e\u0432\u043d\u0430 \u0448\u043a\u043e\u043b\u0430 ",(0,n.jsx)("span",{children:me})]})]})}),(0,n.jsxs)("div",{className:"auth-form-container",children:[(0,n.jsxs)(x.A,{className:"modal-content",isOpen:K,onClose:()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!K;P(e),W(e)}(!1),children:[(0,n.jsxs)("div",{className:"tabs",children:[(0,n.jsx)("button",{className:"login"===R?"active":"",onClick:()=>Y("login"),children:"\u0412\u0445\u0456\u0434"}),(0,n.jsx)("button",{className:"register"===R?"active":"",onClick:()=>Y("register"),children:"\u0420\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u044f"})]}),"login"===R?(0,n.jsx)(j.A,{}):(0,n.jsx)(v.A,{})]}),(0,n.jsx)("h2",{children:"\u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043d\u043d\u044f \u0437\u0430\u043f\u0438\u0441\u0443"}),(0,n.jsxs)("form",{className:"order-confirm-form",onSubmit:async e=>{e.preventDefault();try{const e=`order_${Math.random().toString(36).substr(2,9)}`;V(e),localStorage.setItem("OrderId",e);const s=o(e);window.open(s,"_blank")}catch(s){console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u043e\u043f\u043b\u0430\u0442\u0456 \u0430\u0431\u043e \u043d\u0430\u0434\u0441\u0438\u043b\u0430\u043d\u043d\u0456 \u0434\u0430\u043d\u0438\u0445",s),$("\u0421\u0442\u0430\u043b\u0430\u0441\u044f \u043f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0456\u0434 \u0447\u0430\u0441 \u043e\u043f\u043b\u0430\u0442\u0438")}},children:[(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("img",{src:N.A,alt:""}),(0,n.jsx)("input",{type:"email",placeholder:"Email",value:l,onChange:e=>{i(e.target.value),w&&_("")}}),(0,n.jsx)("p",{className:"error-message-email",children:w})]}),J.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("h4",{className:"student-number",children:["\u0421\u0442\u0443\u0434\u0435\u043d\u0442 ",X+1]}),(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("img",{src:N.A,alt:""}),(0,n.jsx)("input",{type:"text",placeholder:"\u0406\u043c'\u044f \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430",value:J[X].name,onChange:e=>je(X,"name",e.target.value)})]}),(0,n.jsxs)("div",{className:"field",children:[(0,n.jsx)("img",{src:g.A,alt:""}),(0,n.jsx)("input",{type:"phone",placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430",value:J[X].phone,onChange:e=>je(X,"phone",e.target.value)})]})]},X),(0,n.jsxs)("div",{className:"actions",children:[X>0&&(0,n.jsx)("button",{type:"button",onClick:()=>{X>0&&Z(X-1)},children:"\u041d\u0430\u0437\u0430\u0434"}),X<J.length-1&&(0,n.jsx)("button",{type:"button",onClick:()=>{xe(l)?(_(""),X<J.length-1&&Z(X+1)):_("Email \u0432\u0432\u0435\u0434\u0435\u043d\u043e \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e")},children:"\u0414\u0430\u043b\u0456"}),X===J.length-1&&(0,n.jsx)("button",{type:"button",onClick:()=>ve(!0),disabled:!J[X].name||!J[X].phone||!xe(l),children:"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u0438"})]})]}),(0,n.jsx)("div",{children:(0,n.jsx)(x.A,{className:"modal-content-result",isOpen:z,onClose:()=>ve(!1),children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"",children:[(0,n.jsx)("h2",{children:"\u041f\u0456\u0434\u0441\u0443\u043c\u043e\u043a"}),(0,n.jsxs)("div",{className:"studentsList",children:[(0,n.jsx)("span",{className:"modal-close",onClick:()=>ve(!1),children:"\xd7"}),(0,n.jsxs)("div",{className:"students-block",children:[(0,n.jsx)("div",{className:"students-head",children:"\u0423\u0447\u043d\u0456:"}),(0,n.jsx)("div",{className:"contents-block",children:J.map(((e,s)=>(0,n.jsx)("div",{className:"content",children:(0,n.jsx)("p",{children:e.name})},s)))})]})]}),ae&&(0,n.jsxs)("div",{children:[ce,c(ae,te,re,ne,ce,ie,de,oe,he)]}),re&&(0,n.jsx)("div",{children:c(ae,te,re,ne,ce,ie,de,oe,he)})]}),(0,n.jsxs)("div",{className:"pay-btns",children:[(0,n.jsx)("button",{type:"submit",children:"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u0438"}),(0,n.jsx)("button",{type:"button",onClick:()=>{u({username:e,email:l,phone:d,order:D,time:T,lang:y,levelName:k,teacherId:ne,teacherName:ce,lessonTypes:ie,selectedSlots:U,count:de,students:J,setMessage:M,setErrorMessage:$}),ve(!1)},children:"\u0417\u0440\u043e\u0431\u0438\u0442\u0438 \u0437\u0430\u044f\u0432\u043a\u0443"})]}),(0,n.jsx)("div",{className:"status-pay",children:(0,n.jsx)("h3",{children:q&&(0,n.jsxs)("div",{children:["\u0421\u0442\u0430\u0442\u0443\u0441 \u043f\u043b\u0430\u0442\u0435\u0436\u0443: ",q]})})})]})})}),(0,n.jsx)("p",{children:C}),(0,n.jsx)("p",{className:"error-message",children:A})]})]})]})}),(0,n.jsx)(b.A,{})]})}},6412:()=>{},477:()=>{}}]);
//# sourceMappingURL=716.95c4e8b8.chunk.js.map
"use strict";(self.webpackChunkrlc=self.webpackChunkrlc||[]).push([[708],{5501:(e,a,t)=>{t.d(a,{r:()=>s,u:()=>l});t(2573);function l(e){const a=e.replace("\u0440.","").replace("\u043e","").trim();console.log(a);const[t,l,s,r,n,c]=a.split(" "),i={"\u0441\u0456\u0447\u043d\u044f":"January","\u043b\u044e\u0442\u043e\u0433\u043e":"February","\u0431\u0435\u0440\u0435\u0437\u043d\u044f":"March","\u043a\u0432\u0456\u0442\u043d\u044f":"April","\u0442\u0440\u0430\u0432\u043d\u044f":"May","\u0447\u0435\u0440\u0432\u043d\u044f":"June","\u043b\u0438\u043f\u043d\u044f":"July","\u0441\u0435\u0440\u043f\u043d\u044f":"August","\u0432\u0435\u0440\u0435\u0441\u043d\u044f":"September","\u0436\u0432\u0442\u043d\u044f":"October","\u043b\u0438\u0441\u0442\u043f\u0430\u0434\u0430":"November","\u0433\u0440\u0443\u0434\u043d\u044f":"December"}[l];return new Date(`${i} ${t}, ${s} ${c}`).toUTCString()}const s=e=>{const a=new Date(e);return`${a.getUTCDate()} ${["\u0441\u0456\u0447\u043d\u044f","\u043b\u044e\u0442\u043e\u0433\u043e","\u0431\u0435\u0440\u0435\u0437\u043d\u044f","\u043a\u0432\u0456\u0442\u043d\u044f","\u0442\u0440\u0430\u0432\u043d\u044f","\u0447\u0435\u0440\u0432\u043d\u044f","\u043b\u0438\u043f\u043d\u044f","\u0441\u0435\u0440\u043f\u043d\u044f","\u0432\u0435\u0440\u0435\u0441\u043d\u044f","\u0436\u043e\u0432\u0442\u043d\u044f","\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434\u0430","\u0433\u0440\u0443\u0434\u043d\u044f"][a.getUTCMonth()]} ${a.getUTCFullYear()} \u0440. \u043e ${String(a.getUTCHours()).padStart(2,"0")}:${String(a.getUTCMinutes()).padStart(2,"0")}`}},1708:(e,a,t)=>{t.r(a),t.d(a,{default:()=>h});var l=t(3216),s=t(5043),r=t(5475),n=(t(8571),t(5501));const c=(e,a,t,l,s,r)=>{const n=localStorage.getItem(`availableTimes_${e.data.teacherId}`);if(n)try{return JSON.parse(n).map((e=>e.time))}catch(o){console.error("Invalid JSON string for availableTimes",o)}let c=[];if("string"===typeof a)try{c=JSON.parse(a),Array.isArray(c)||(console.error("parsedSelectedTimes is not an array:",c),c=[])}catch(o){console.error("Invalid JSON string for selectedTimes",o)}else Array.isArray(a)&&(c=a);const i=e.data.lang.filter((e=>e.lang===t)).flatMap((e=>e.level)).filter((e=>e.levelName===l)).flatMap((e=>e.lessonTypes.filter((e=>e.typeName==r)))).flatMap((e=>e.date)).flatMap((e=>e.workTime)).filter((e=>c.some((a=>new Date(new Date(e.time).getTime()+6e4*new Date(e.time).getTimezoneOffset()).getTime()===new Date(new Date(s(a))).getTime()&&e.slots>0))));return console.log(i),localStorage.setItem(`availableTimes_${e.data.teacherId}`,JSON.stringify(i)),i.map((e=>e.time))},i=(e,a,t,l,s,r,n)=>{const c=`${e.data.teacherName}, ${e.data.teacherId}, ${a}, ${t}, ${l}, ${s}`;if(n.includes(c)){const e=n.filter((e=>e!==c));r(e),localStorage.setItem("selectedSlots",JSON.stringify(e))}else{const e=[...n,c];r(e),localStorage.setItem("selectedSlots",JSON.stringify(e))}};var o=t(8929),d=t(6213);const m=async(e,a,t,l,s,r,c,i,o,m,g)=>{try{let m=(await d.A.get(`http://13.60.221.226/api/schools/${e}`)).data[0].ESL.teacher;if(a){let e=[];if("string"===typeof t&&t.length>0)try{e=JSON.parse(t)}catch(h){console.error("Invalid JSON string for selectedTimes:",h)}Array.isArray(e)||(e=[]),m=m.filter((t=>t.data&&t.data.lang.some((t=>t.level&&t.level.some((c=>c.levelName===a&&(t.lang===l||t.lang===s)&&c.lessonTypes.some((a=>a.typeName===r&&(0===e.length||e.some((e=>a.date.some((a=>a.workTime.some((a=>new Date(new Date(a.time).getTime()+6e4*new Date(a.time).getTimezoneOffset()).getTime()===new Date(new Date((0,n.u)(e))).getTime()&&a.slots>0)))))))))))))))}console.log(m);const g=m.flatMap((e=>e.data.lang.flatMap((e=>e.lang)))),f=m.flatMap((e=>e.data.lang.filter((e=>e.lang===l)).flatMap((e=>e.level.filter((e=>e.levelName===a)).flatMap((e=>e.lessonTypes.filter((e=>e.typeName==r)).flatMap((e=>e.date))))))));l?c(g):s&&c(s),i(f),o(m)}catch(f){m(f.message)}finally{g(!1)}};t(6412);var g=t(579);const h=()=>{const[e,a]=(0,s.useState)(null),[t,d]=(0,s.useState)(!0),[h,f]=(0,s.useState)(null),[p,u]=(0,s.useState)([]),[N,v]=(0,s.useState)(),[j,y]=(0,s.useState)([]),[x,S]=(0,s.useState)(1),$=(0,l.zy)(),{level:T}=$.state||{},{language:D}=$.state||{},{lessonTypes:I}=$.state||{},{lang_from_general_cal:b}=$.state||{},{schoolId:w}=$.state||{},{count:M}=$.state||{},{price:O}=$.state||{},{logo:_}=$.state||{},{name:J}=$.state||{};console.log(O),console.log(b,T,I,w,M);const k=localStorage.getItem("selectedDates");console.log(w);const C=()=>D?"/date":"/final";return(0,s.useEffect)((()=>{Object.keys(localStorage);localStorage.setItem("OrderId",[]),m(w,T,k,D,b,I,v,u,a,f,d)}),[]),t?(0,g.jsx)("div",{className:"loading",children:"Loading..."}):h?(0,g.jsxs)("div",{className:"error",children:["Error: ",h]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"main",children:(0,g.jsxs)("div",{className:"container",children:[(0,g.jsx)("div",{className:"logo",children:(0,g.jsx)("div",{className:"logo-items",children:(0,g.jsx)(r.N_,{to:`/${w}`,children:(0,g.jsx)("img",{src:_,alt:"Logo"})})})}),(0,g.jsxs)("div",{className:"container-items-block teach",children:[(0,g.jsx)("h1",{className:"teacher-title",children:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0432\u0447\u0438\u0442\u0435\u043b\u044f"}),e&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"teachers-data",children:e.length>0?e.map(((e,a)=>(0,g.jsxs)("div",{className:"teacher",children:[(0,g.jsxs)("div",{className:"teacherData",children:[(0,g.jsx)("div",{className:"teacherImg",children:(0,g.jsx)("img",{src:e.data.teacherImg,alt:""})}),(0,g.jsxs)("div",{className:"name-and-btn",children:[(0,g.jsx)("div",{className:"teacher-link",children:(0,g.jsx)("p",{children:e.data.teacherName})}),c(e,k,b,T,n.u,I).length<=0?(0,g.jsx)(r.N_,{to:C(),state:{teacherDate:e.data.lang.filter((e=>e.lang===D)),level:T,lang_from_general_cal:N,teacherId:e.data.teacherId,teacherName:e.data.teacherName,lessonTypes:I,schoolId:w,count:M||x,price:O,logo:_,name:J},className:"select-btn",children:(0,g.jsx)("div",{children:(0,g.jsx)("p",{children:"\u041e\u0431\u0440\u0430\u0442\u0438"})})}):(0,g.jsx)("div",{className:"select-btn",children:(0,g.jsx)("div",{className:"teacher-times",children:c(e,k,b,T,n.u).length>0?(0,g.jsx)("ul",{className:"teachers-times",children:c(e,k,b,T,n.u).map(((a,t)=>(0,g.jsx)("li",{onClick:()=>i(e,N,T,I,a,y,j),style:{cursor:"pointer",backgroundColor:j.includes(`${e.data.teacherName}, ${e.data.teacherId}, ${N}, ${T}, ${I}, ${a}`)?"#4D7D6DB2":"#D9D9D980",color:j.includes(`${e.data.teacherName}, ${e.data.teacherId}, ${N}, ${T}, ${I}, ${a}`)?"white":"#205C48"},children:(0,n.r)(a)},t)))}):null})})]})]}),(0,g.jsx)("hr",{})]},a))):(0,g.jsx)("div",{children:(0,g.jsx)("p",{children:"\u041d\u0435\u043c\u0430\u0454 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0438\u0445 \u0432\u0447\u0438\u0442\u0435\u043b\u0456\u0432"})})}),e.some((e=>c(e,k,b,T,n.u).length>0))&&(0,g.jsx)(r.N_,{to:C(),state:{teacherDate:e[0].data.lang.filter((e=>e.lang===D)),level:T,lang_from_general_cal:N,teacherId:e[0].data.teacherId,lessonTypes:I,schoolId:w,count:M||x,price:O,logo:_,name:J},className:"select-btn",children:(0,g.jsx)("button",{disabled:0===j.length,children:"\u0414\u0430\u043b\u0456"})})]})]})]})}),(0,g.jsx)(o.A,{})]})}},6412:()=>{}}]);
//# sourceMappingURL=708.1df09bd8.chunk.js.map